import{_ as M,u as P,r as f,o as S,a as N,c,b as t,d as r,e as l,f as T,t as o,w as x,g as B,h as R,i as z,j as q,k as $,F as h,l as _,m as i,n as v,p as D,q as V,s as C}from"./index-CHW42hPp.js";import{r as g}from"./ArrowRightIcon-BewnfcEh.js";import{r as E,a as I}from"./ArrowUpIcon-DOum8tTq.js";const L={key:0,class:"flex justify-center items-center py-8"},G={key:1},H={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},J={class:"bg-white rounded-lg shadow-sm p-4 border border-gray-100 hover:shadow-md transition-shadow"},X={class:"flex border-b border-gray-100 py-2 items-center"},K={class:"rounded-full bg-primary bg-opacity-10 p-2 mr-3"},O={class:"text-sm font-medium mt-1 text-gray-800"},Q={class:"flex justify-between items-center mt-3"},U={class:"text-xs text-gray-500"},W={class:"bg-white rounded-lg shadow-sm p-4 border border-gray-100 hover:shadow-md transition-shadow"},Y={class:"flex border-b border-gray-100 py-2 items-center"},Z={class:"rounded-full bg-secondary bg-opacity-10 p-2 mr-3"},tt={class:"text-sm font-semibold mt-1 text-gray-700"},st={class:"flex justify-between items-center mt-3"},et={class:"text-xs text-gray-500"},at={class:"bg-white rounded-lg shadow-sm p-4 border border-gray-100 hover:shadow-md transition-shadow"},rt={class:"flex items-center"},ot={class:"rounded-full bg-info bg-opacity-10 p-2 mr-3"},lt={class:"text-sm font-semibold mt-1 text-gray-700"},it={class:"flex justify-between items-center mt-3"},nt={class:"text-xs text-gray-500"},dt={class:"bg-white rounded-lg shadow-sm p-4 border border-gray-100 hover:shadow-md transition-shadow"},ct={class:"flex items-center"},ut={class:"rounded-full bg-accent bg-opacity-10 p-2 mr-3"},mt={class:"text-lg font-semibold mt-1 text-gray-800"},xt={class:"flex justify-between items-center mt-3"},vt={class:"grid grid-cols-1 lg:grid-cols-3 gap-4 mt-4"},gt={class:"lg:col-span-2 bg-white rounded-lg shadow-sm p-4 border border-gray-100"},ft={class:"h-64 w-full"},pt={class:"relative h-full w-full"},yt={class:"absolute inset-0 flex flex-col justify-between"},ht={class:"absolute inset-0 pl-12"},_t={class:"h-full flex items-end space-x-6 pt-6 pb-5 relative"},bt={class:"absolute inset-0 h-full w-full",preserveAspectRatio:"none"},wt=["points"],kt=["points"],jt={class:"flex space-x-1"},$t={class:"text-xs text-gray-500 mt-2"},Dt={class:"bg-white rounded-lg shadow-sm p-4 border border-gray-100"},Vt={class:"flex justify-between items-center mb-4"},Ct={class:"space-y-3"},Ft={class:"flex-grow"},At={class:"flex justify-between items-start"},Mt={class:"text-xs font-medium text-gray-500"},Pt={class:"flex justify-between items-start mt-0.5"},St={class:"text-xs text-gray-500"},Nt={class:"text-xs text-gray-500"},Tt={__name:"DashboardView",setup(Bt){P();const b=f(!0),u=f({clients:0,loans:0,savingsTotal:0,upcomingRepayments:0}),w=f([]),n=f([]);S(async()=>{try{const a=await N.getDashboardStats();u.value=a.data.data.stats,w.value=a.data.data.recentTransactions||[],n.value=a.data.data.graphData||[]}catch(a){console.error("Erreur lors de la récupération des statistiques:",a)}finally{b.value=!1}});function k(a){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",maximumFractionDigits:0}).format(a)}function p(a,s){return s===0?0:Math.round(a/s*100)}function y(a,s){if(!a||a.length===0)return 1;const d=a.map(e=>e[s]||0);return Math.max(...d,1)}function j(a){if(!n.value||n.value.length===0)return"";const s=y(n.value,a),d=100/(n.value.length-1);return n.value.map((e,m)=>{const F=m*d,A=100-p(e[a],s);return`${F}% ${A}%`}).join(" ")}return(a,s)=>{const d=B("router-link");return i(),c("div",null,[b.value?(i(),c("div",L,s[0]||(s[0]=[t("div",{class:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-primary"},null,-1)]))):(i(),c("div",G,[t("div",H,[t("div",J,[t("div",X,[t("div",K,[r(l(T),{class:"h-5 w-5 text-primary"})]),t("div",null,[s[1]||(s[1]=t("h2",{class:"text-sm font-medium text-gray-600"},"Clients",-1)),t("p",O,o(u.value.clients||0),1)])]),t("div",Q,[t("p",U,"Actifs : "+o(u.value.activeClients||0),1),r(d,{to:"/clients",class:"text-primary hover:text-primary-dark text-xs flex items-center"},{default:x(()=>[s[2]||(s[2]=v(" Détails ")),r(l(g),{class:"h-3 w-3 ml-1"})]),_:1})])]),t("div",W,[t("div",Y,[t("div",Z,[r(l(R),{class:"h-5 w-5 text-secondary"})]),t("div",null,[s[3]||(s[3]=t("h2",{class:"text-sm font-medium text-gray-600"},"Prêts",-1)),t("p",tt,o(u.value.loans||0),1)])]),t("div",st,[t("p",et,"Actifs : "+o(u.value.activeLoans||0),1),r(d,{to:"/loans",class:"text-primary hover:text-primary-dark text-xs flex items-center"},{default:x(()=>[s[4]||(s[4]=v(" Détails ")),r(l(g),{class:"h-3 w-3 ml-1"})]),_:1})])]),t("div",at,[t("div",rt,[t("div",ot,[r(l(z),{class:"h-5 w-5 text-info"})]),t("div",null,[s[5]||(s[5]=t("h2",{class:"text-sm font-medium text-gray-600"},"Épargne",-1)),t("p",lt,o(k(u.value.savingsTotal||0)),1)])]),t("div",it,[t("p",nt,"Comptes actifs : "+o(u.value.savingsAccounts||0),1),r(d,{to:"/savings",class:"text-primary hover:text-primary-dark text-xs flex items-center"},{default:x(()=>[s[6]||(s[6]=v(" Détails ")),r(l(g),{class:"h-3 w-3 ml-1"})]),_:1})])]),t("div",dt,[t("div",ct,[t("div",ut,[r(l(q),{class:"h-5 w-5 text-accent"})]),t("div",null,[s[7]||(s[7]=t("h2",{class:"text-sm font-medium text-gray-600"},"Échéances",-1)),t("p",mt,o(u.value.upcomingRepayments||0),1)])]),t("div",xt,[s[9]||(s[9]=t("p",{class:"text-xs text-gray-500"},"À venir (30j)",-1)),r(d,{to:"/loans/overdue",class:"text-primary hover:text-primary-dark text-xs flex items-center"},{default:x(()=>[s[8]||(s[8]=v(" Voir en retard ")),r(l(g),{class:"h-3 w-3 ml-1"})]),_:1})])])]),t("div",vt,[t("div",gt,[s[12]||(s[12]=$('<div class="flex justify-between items-center mb-4" data-v-27577afc><h2 class="text-sm font-medium text-gray-600" data-v-27577afc>Évolution des activités</h2><div class="flex space-x-2" data-v-27577afc><button class="px-2 py-1 text-xs rounded-md bg-primary text-white" data-v-27577afc>Mois</button><button class="px-2 py-1 text-xs rounded-md bg-gray-100 text-gray-600 hover:bg-gray-200" data-v-27577afc>Semaine</button><button class="px-2 py-1 text-xs rounded-md bg-gray-100 text-gray-600 hover:bg-gray-200" data-v-27577afc>Jour</button></div></div>',1)),t("div",ft,[t("div",pt,[t("div",yt,[(i(),c(h,null,_(5,e=>t("div",{key:e,class:"h-px w-full bg-gray-100"})),64))]),s[10]||(s[10]=t("div",{class:"absolute left-0 inset-y-0 flex flex-col justify-between text-xs text-gray-500"},[t("div",null,"1M FCFA"),t("div",null,"800k"),t("div",null,"600k"),t("div",null,"400k"),t("div",null,"200k"),t("div",null,"0")],-1)),t("div",ht,[t("div",_t,[(i(),c("svg",bt,[t("polyline",{points:j("loans"),fill:"none",stroke:"rgba(59, 130, 246, 0.7)","stroke-width":"2",class:"polyline-loans"},null,8,wt),t("polyline",{points:j("savings"),fill:"none",stroke:"rgba(236, 72, 153, 0.7)","stroke-width":"2",class:"polyline-savings"},null,8,kt)])),(i(!0),c(h,null,_(n.value,(e,m)=>(i(),c("div",{key:m,class:"flex flex-col items-center relative z-10",style:{"flex-grow":"1"}},[t("div",jt,[t("div",{class:"w-3 bg-primary rounded-t-sm",style:D(`height: ${p(e.loans,y(n.value,"loans"))}%`)},null,4),t("div",{class:"w-3 bg-accent rounded-t-sm",style:D(`height: ${p(e.savings,y(n.value,"savings"))}%`)},null,4)]),t("div",$t,o(e.month),1)]))),128))])]),s[11]||(s[11]=$('<div class="absolute right-0 top-0 flex items-center space-x-4" data-v-27577afc><div class="flex items-center" data-v-27577afc><div class="w-3 h-3 bg-primary rounded-sm mr-1" data-v-27577afc></div><span class="text-xs text-gray-600" data-v-27577afc>Prêts</span></div><div class="flex items-center" data-v-27577afc><div class="w-3 h-3 bg-accent rounded-sm mr-1" data-v-27577afc></div><span class="text-xs text-gray-600" data-v-27577afc>Épargne</span></div></div>',1))])])]),t("div",Dt,[t("div",Vt,[s[14]||(s[14]=t("h2",{class:"text-xs font-medium text-gray-500"},"Dernières transactions",-1)),r(d,{to:"/savings",class:"text-primary hover:text-primary-dark text-xs flex items-center"},{default:x(()=>[s[13]||(s[13]=v(" Voir tout ")),r(l(g),{class:"h-3 w-3 ml-1"})]),_:1})]),t("div",Ct,[(i(!0),c(h,null,_(w.value,(e,m)=>(i(),c("div",{key:m,class:"flex items-center p-2 hover:bg-gray-50 rounded-md"},[t("div",{class:V(`rounded-full p-1.5 mr-3 ${e.type==="deposit"?"bg-secondary bg-opacity-10":"bg-red-100"}`)},[e.type==="deposit"?(i(),C(l(E),{key:0,class:"h-3 w-3 text-secondary transform rotate-45"})):(i(),C(l(I),{key:1,class:"h-3 w-3 text-red-500 transform rotate-45"}))],2),t("div",Ft,[t("div",At,[t("span",Mt,o(e.client),1),t("span",{class:V(`text-xs font-medium ${e.type==="deposit"?"text-secondary":"text-red-500"}`)},o(e.type==="deposit"?"+":"-")+o(k(e.amount)),3)]),t("div",Pt,[t("span",St,o(e.account),1),t("span",Nt,o(e.date),1)])])]))),128))])])])]))])}}},It=M(Tt,[["__scopeId","data-v-27577afc"]]);export{It as default};
