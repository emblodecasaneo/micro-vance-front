import{c as d,m as o,b as t,t as a,F as g,l as p,x as w,q as y,N as R,r as _,K as j,y as M,z as F,d as k,a as D}from"./index-CHW42hPp.js";const T={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},N={class:"bg-white rounded-lg shadow-sm p-4 border border-gray-100"},L={class:"text-sm font-medium text-gray-800"},S={class:"bg-white rounded-lg shadow-sm p-4 border border-gray-100"},I={class:"text-sm font-medium text-gray-800"},q={class:"bg-white rounded-lg shadow-sm p-4 border border-gray-100"},E={class:"space-y-2"},H={class:"text-sm"},Y={class:"text-sm font-medium"},P={class:"bg-white rounded-lg shadow-sm overflow-hidden"},V={key:0,class:"p-4 text-center text-gray-500"},z={key:1,class:"overflow-x-auto"},B={class:"min-w-full divide-y divide-gray-200"},O={class:"bg-white divide-y divide-gray-200"},X={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},G={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},U={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},K={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},J={class:"px-6 py-4 whitespace-nowrap"},W={key:2,class:"px-4 py-3 border-t border-gray-200 flex items-center justify-between"},Z={class:"text-sm text-gray-500"},tt={class:"flex space-x-2"},et=["disabled"],st=["innerHTML"],at={__name:"LoanReport",props:{data:{type:Object,required:!0}},setup(n){function l(r){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",maximumFractionDigits:0}).format(r)}function b(r){if(!r)return"N/A";const e=new Date(r);return new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"short",day:"numeric"}).format(e)}function u(r){return{pending:"En attente",active:"Actif",completed:"Terminé",defaulted:"Défaut",cancelled:"Annulé",rejected:"Rejeté"}[r]||r}function x(r){return{pending:"bg-yellow-100 text-yellow-800",active:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800",defaulted:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800",rejected:"bg-red-100 text-red-800"}[r]||"bg-gray-100 text-gray-800"}return(r,e)=>(o(),d("div",null,[t("div",T,[t("div",N,[e[0]||(e[0]=t("h3",{class:"text-xs font-medium text-gray-500 mb-3"},"Total des prêts",-1)),t("p",L,a(n.data.total_count),1)]),t("div",S,[e[1]||(e[1]=t("h3",{class:"text-xs font-medium text-gray-500 mb-3"},"Montant total",-1)),t("p",I,a(l(n.data.total_amount)),1)]),t("div",q,[e[2]||(e[2]=t("h3",{class:"text-xs font-medium text-gray-500 mb-3"},"Répartition par statut",-1)),t("div",E,[(o(!0),d(g,null,p(n.data.status_distribution,s=>(o(),d("div",{key:s.status,class:"flex justify-between"},[t("span",H,a(u(s.status)),1),t("span",Y,a(s.count)+" ("+a(l(s.total_amount))+")",1)]))),128))])])]),t("div",P,[e[4]||(e[4]=t("div",{class:"px-4 py-3 border-b border-gray-200"},[t("h3",{class:"text-sm font-medium text-gray-700"},"Détails des prêts")],-1)),n.data.loans.data.length===0?(o(),d("div",V," Aucun prêt trouvé pour les critères sélectionnés. ")):(o(),d("div",z,[t("table",B,[e[3]||(e[3]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Client"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Montant"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date de début"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Durée"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut")])],-1)),t("tbody",O,[(o(!0),d(g,null,p(n.data.loans.data,s=>(o(),d("tr",{key:s.id},[t("td",X,"#"+a(s.id),1),t("td",G,a(s.client?`${s.client.first_name} ${s.client.last_name}`:"N/A"),1),t("td",Q,a(l(s.amount)),1),t("td",U,a(b(s.start_date)),1),t("td",K,a(s.term_months)+" mois",1),t("td",J,[t("span",{class:y([x(s.status),"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full"])},a(u(s.status)),3)])]))),128))])])])),n.data.loans.data.length>0?(o(),d("div",W,[t("div",Z," Affichage de "+a(n.data.loans.from)+" à "+a(n.data.loans.to)+" sur "+a(n.data.loans.total)+" résultats ",1),t("div",tt,[(o(!0),d(g,null,p(n.data.loans.links,s=>(o(),d("button",{key:s.label,disabled:!s.url,class:y(["px-3 py-1 text-xs rounded border border-gray-300 hover:bg-gray-50",{"bg-primary text-white hover:bg-primary-dark":s.active}])},[t("span",{innerHTML:s.label},null,8,st)],10,et))),128))])])):w("",!0)])]))}},rt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},nt={class:"bg-white rounded-lg shadow-sm p-4 border border-gray-100"},dt={class:"text-xl font-bold text-gray-800"},ot={class:"text-sm text-gray-500 mt-1"},it={class:"bg-white rounded-lg shadow-sm p-4 border border-gray-100"},lt={class:"space-y-1"},ct={class:"flex justify-between"},ut={class:"text-sm font-medium text-green-600"},xt={class:"flex justify-between"},mt={class:"text-sm font-medium text-yellow-600"},yt={class:"flex justify-between"},gt={class:"text-sm font-medium text-red-600"},pt={class:"bg-white rounded-lg shadow-sm p-4 border border-gray-100"},bt={class:"space-y-2"},ft={class:"text-sm"},ht={class:"text-sm font-medium"},vt={class:"bg-white rounded-lg shadow-sm overflow-hidden"},wt={key:0,class:"p-4 text-center text-gray-500"},_t={key:1,class:"overflow-x-auto"},$t={class:"min-w-full divide-y divide-gray-200"},kt={class:"bg-white divide-y divide-gray-200"},Dt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Mt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ft={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ct={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},At={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Rt={class:"px-6 py-4 whitespace-nowrap"},jt={key:2,class:"px-4 py-3 border-t border-gray-200 flex items-center justify-between"},Tt={class:"text-sm text-gray-500"},Nt={class:"flex space-x-2"},Lt=["disabled"],St=["innerHTML"],It={__name:"RepaymentReport",props:{data:{type:Object,required:!0}},setup(n){function l(r){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",maximumFractionDigits:0}).format(r)}function b(r){if(!r)return"N/A";const e=new Date(r);return new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"short",day:"numeric"}).format(e)}function u(r){return{pending:"En attente",paid:"Payé",late:"En retard",missed:"Manqué"}[r]||r}function x(r){return{pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",late:"bg-orange-100 text-orange-800",missed:"bg-red-100 text-red-800"}[r]||"bg-gray-100 text-gray-800"}return(r,e)=>(o(),d("div",null,[t("div",rt,[t("div",nt,[e[0]||(e[0]=t("h3",{class:"text-sm font-medium text-gray-500 mb-3"},"Total des remboursements",-1)),t("p",dt,a(n.data.total_count),1),t("p",ot,a(l(n.data.total_amount)),1)]),t("div",it,[e[4]||(e[4]=t("h3",{class:"text-sm font-medium text-gray-500 mb-3"},"Montants par statut",-1)),t("div",lt,[t("div",ct,[e[1]||(e[1]=t("span",{class:"text-sm text-green-600"},"Payés:",-1)),t("span",ut,a(l(n.data.paid_amount)),1)]),t("div",xt,[e[2]||(e[2]=t("span",{class:"text-sm text-yellow-600"},"En attente:",-1)),t("span",mt,a(l(n.data.pending_amount)),1)]),t("div",yt,[e[3]||(e[3]=t("span",{class:"text-sm text-red-600"},"Manqués:",-1)),t("span",gt,a(l(n.data.missed_amount)),1)])])]),t("div",pt,[e[5]||(e[5]=t("h3",{class:"text-sm font-medium text-gray-500 mb-3"},"Répartition par statut",-1)),t("div",bt,[(o(!0),d(g,null,p(n.data.status_distribution,s=>(o(),d("div",{key:s.status,class:"flex justify-between"},[t("span",ft,a(u(s.status)),1),t("span",ht,a(s.count)+" ("+a(l(s.total_amount))+")",1)]))),128))])])]),t("div",vt,[e[7]||(e[7]=t("div",{class:"px-4 py-3 border-b border-gray-200"},[t("h3",{class:"text-sm font-medium text-gray-700"},"Détails des remboursements")],-1)),n.data.repayments.data.length===0?(o(),d("div",wt," Aucun remboursement trouvé pour les critères sélectionnés. ")):(o(),d("div",_t,[t("table",$t,[e[6]||(e[6]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Client"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Prêt"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date d'échéance"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Montant"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut")])],-1)),t("tbody",kt,[(o(!0),d(g,null,p(n.data.repayments.data,s=>{var v;return o(),d("tr",{key:s.id},[t("td",Dt,"#"+a(s.id),1),t("td",Mt,a((v=s.loan)!=null&&v.client?`${s.loan.client.first_name} ${s.loan.client.last_name}`:"N/A"),1),t("td",Ft,"Prêt #"+a(s.loan_id),1),t("td",Ct,a(b(s.due_date)),1),t("td",At,a(l(s.amount)),1),t("td",Rt,[t("span",{class:y([x(s.status),"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full"])},a(u(s.status)),3)])])}),128))])])])),n.data.repayments.data.length>0?(o(),d("div",jt,[t("div",Tt," Affichage de "+a(n.data.repayments.from)+" à "+a(n.data.repayments.to)+" sur "+a(n.data.repayments.total)+" résultats ",1),t("div",Nt,[(o(!0),d(g,null,p(n.data.repayments.links,s=>(o(),d("button",{key:s.label,disabled:!s.url,class:y(["px-3 py-1 text-xs rounded border border-gray-300 hover:bg-gray-50",{"bg-primary text-white hover:bg-primary-dark":s.active}])},[t("span",{innerHTML:s.label},null,8,St)],10,Lt))),128))])])):w("",!0)])]))}},qt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},Et={class:"bg-white rounded-lg shadow-sm p-4 border border-gray-100"},Ht={class:"text-xl font-bold text-gray-800"},Yt={class:"text-sm text-gray-500 mt-1"},Pt={class:"bg-white rounded-lg shadow-sm p-4 border border-gray-100"},Vt={class:"space-y-1"},zt={class:"flex justify-between"},Bt={class:"text-sm font-medium text-green-600"},Ot={class:"flex justify-between"},Xt={class:"text-sm font-medium text-red-600"},Gt={class:"flex justify-between"},Qt={class:"text-sm font-medium"},Ut={class:"bg-white rounded-lg shadow-sm p-4 border border-gray-100"},Kt={class:"space-y-2"},Jt={class:"text-sm"},Wt={class:"text-sm font-medium"},Zt={class:"bg-white rounded-lg shadow-sm overflow-hidden"},te={key:0,class:"p-4 text-center text-gray-500"},ee={key:1,class:"overflow-x-auto"},se={class:"min-w-full divide-y divide-gray-200"},ae={class:"bg-white divide-y divide-gray-200"},re={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},ne={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},de={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},oe={class:"px-6 py-4 whitespace-nowrap"},ie={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},le={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ue={key:2,class:"px-4 py-3 border-t border-gray-200 flex items-center justify-between"},xe={class:"text-sm text-gray-500"},me={class:"flex space-x-2"},ye=["disabled"],ge=["innerHTML"],pe={__name:"SavingsReport",props:{data:{type:Object,required:!0}},setup(n){function l(r){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",maximumFractionDigits:0}).format(r)}function b(r){if(!r)return"N/A";const e=new Date(r);return new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)}function u(r){return{deposit:"Dépôt",withdrawal:"Retrait",interest:"Intérêt",fee:"Frais",transfer:"Transfert"}[r]||r}function x(r){return{deposit:"bg-green-100 text-green-800",withdrawal:"bg-red-100 text-red-800",interest:"bg-blue-100 text-blue-800",fee:"bg-orange-100 text-orange-800",transfer:"bg-purple-100 text-purple-800"}[r]||"bg-gray-100 text-gray-800"}return(r,e)=>(o(),d("div",null,[t("div",qt,[t("div",Et,[e[0]||(e[0]=t("h3",{class:"text-sm font-medium text-gray-500 mb-3"},"Comptes d'épargne",-1)),t("p",Ht,a(n.data.total_accounts),1),t("p",Yt,"Solde total: "+a(l(n.data.total_balance)),1)]),t("div",Pt,[e[5]||(e[5]=t("h3",{class:"text-sm font-medium text-gray-500 mb-3"},"Mouvements",-1)),t("div",Vt,[t("div",zt,[e[1]||(e[1]=t("span",{class:"text-sm text-green-600"},"Dépôts:",-1)),t("span",Bt,a(l(n.data.deposits_amount)),1)]),t("div",Ot,[e[2]||(e[2]=t("span",{class:"text-sm text-red-600"},"Retraits:",-1)),t("span",Xt,a(l(n.data.withdrawals_amount)),1)]),e[4]||(e[4]=t("div",{class:"border-t border-gray-100 my-2"},null,-1)),t("div",Gt,[e[3]||(e[3]=t("span",{class:"text-sm font-medium"},"Balance:",-1)),t("span",Qt,a(l(n.data.deposits_amount-n.data.withdrawals_amount)),1)])])]),t("div",Ut,[e[6]||(e[6]=t("h3",{class:"text-sm font-medium text-gray-500 mb-3"},"Répartition par type",-1)),t("div",Kt,[(o(!0),d(g,null,p(n.data.type_distribution,s=>(o(),d("div",{key:s.type,class:"flex justify-between"},[t("span",Jt,a(u(s.type)),1),t("span",Wt,a(s.count)+" ("+a(l(s.total_amount))+")",1)]))),128))])])]),t("div",Zt,[e[8]||(e[8]=t("div",{class:"px-4 py-3 border-b border-gray-200"},[t("h3",{class:"text-sm font-medium text-gray-700"},"Détails des transactions")],-1)),n.data.transactions.data.length===0?(o(),d("div",te," Aucune transaction trouvée pour les critères sélectionnés. ")):(o(),d("div",ee,[t("table",se,[e[7]||(e[7]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Client"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Compte"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Montant"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Solde après")])],-1)),t("tbody",ae,[(o(!0),d(g,null,p(n.data.transactions.data,s=>(o(),d("tr",{key:s.id},[t("td",re,"#"+a(s.id),1),t("td",ne,a(s!=null&&s.client?`${s.client.first_name} ${s.client.last_name}`:"N/A"),1),t("td",de,a(s.savingsAccount?`#${s.savingsAccount.account_number}`:"N/A"),1),t("td",oe,[t("span",{class:y([x(s.type),"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full"])},a(u(s.type)),3)]),t("td",ie,a(b(s.created_at)),1),t("td",le,a(l(s.amount)),1),t("td",ce,a(l(s.balance_after)),1)]))),128))])])])),n.data.transactions.data.length>0?(o(),d("div",ue,[t("div",xe," Affichage de "+a(n.data.transactions.from)+" à "+a(n.data.transactions.to)+" sur "+a(n.data.transactions.total)+" résultats ",1),t("div",me,[(o(!0),d(g,null,p(n.data.transactions.links,s=>(o(),d("button",{key:s.label,disabled:!s.url,class:y(["px-3 py-1 text-xs rounded border border-gray-300 hover:bg-gray-50",{"bg-primary text-white hover:bg-primary-dark":s.active}])},[t("span",{innerHTML:s.label},null,8,ge)],10,ye))),128))])])):w("",!0)])]))}},be={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},fe={class:"bg-white rounded-lg shadow-sm p-4 border border-gray-100"},he={class:"text-xl font-bold text-gray-800"},ve={class:"mt-2 flex justify-between text-sm"},we={class:"text-green-600"},_e={class:"text-gray-500"},$e={class:"bg-white rounded-lg shadow-sm p-4 border border-gray-100"},ke={class:"space-y-1"},De={class:"flex justify-between"},Me={class:"text-sm font-medium"},Fe={class:"flex justify-between"},Ce={class:"text-sm font-medium"},Ae={class:"bg-white rounded-lg shadow-sm p-4 border border-gray-100"},Re={class:"space-y-2 max-h-32 overflow-y-auto"},je={class:"text-sm"},Te={class:"text-sm font-medium"},Ne={class:"bg-white rounded-lg shadow-sm overflow-hidden"},Le={key:0,class:"p-4 text-center text-gray-500"},Se={key:1,class:"overflow-x-auto"},Ie={class:"min-w-full divide-y divide-gray-200"},qe={class:"bg-white divide-y divide-gray-200"},Ee={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},He={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ye={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Pe={class:"text-xs text-gray-400"},Ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ze={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Be={class:"px-6 py-4 whitespace-nowrap"},Oe={key:2,class:"px-4 py-3 border-t border-gray-200 flex items-center justify-between"},Xe={class:"text-sm text-gray-500"},Ge={class:"flex space-x-2"},Qe=["disabled"],Ue=["innerHTML"],Ke={__name:"ClientReport",props:{data:{type:Object,required:!0}},setup(n){function l(x){if(!x)return"N/A";const r=new Date(x);return new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"short",day:"numeric"}).format(r)}function b(x){return{active:"Actif",inactive:"Inactif",blacklisted:"Liste noire"}[x]||x}function u(x){return{active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",blacklisted:"bg-red-100 text-red-800"}[x]||"bg-gray-100 text-gray-800"}return(x,r)=>(o(),d("div",null,[t("div",be,[t("div",fe,[r[0]||(r[0]=t("h3",{class:"text-sm font-medium text-gray-500 mb-3"},"Total des clients",-1)),t("p",he,a(n.data.total_clients),1),t("div",ve,[t("span",we,"Actifs: "+a(n.data.active_clients),1),t("span",_e,"Inactifs: "+a(n.data.inactive_clients),1)])]),t("div",$e,[r[3]||(r[3]=t("h3",{class:"text-sm font-medium text-gray-500 mb-3"},"Clients avec services",-1)),t("div",ke,[t("div",De,[r[1]||(r[1]=t("span",{class:"text-sm"},"Avec prêts actifs:",-1)),t("span",Me,a(n.data.clients_with_active_loans),1)]),t("div",Fe,[r[2]||(r[2]=t("span",{class:"text-sm"},"Avec comptes d'épargne:",-1)),t("span",Ce,a(n.data.clients_with_savings),1)])])]),t("div",Ae,[r[4]||(r[4]=t("h3",{class:"text-sm font-medium text-gray-500 mb-3"},"Répartition par agent",-1)),t("div",Re,[(o(!0),d(g,null,p(n.data.agent_distribution,e=>(o(),d("div",{key:e.agent_id,class:"flex justify-between"},[t("span",je,a(e.agent?e.agent.name:"Sans agent"),1),t("span",Te,a(e.count),1)]))),128))])])]),t("div",Ne,[r[6]||(r[6]=t("div",{class:"px-4 py-3 border-b border-gray-200"},[t("h3",{class:"text-sm font-medium text-gray-700"},"Détails des clients")],-1)),n.data.clients.data.length===0?(o(),d("div",Le," Aucun client trouvé pour les critères sélectionnés. ")):(o(),d("div",Se,[t("table",Ie,[r[5]||(r[5]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nom"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Contact"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Agent"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date d'inscription"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut")])],-1)),t("tbody",qe,[(o(!0),d(g,null,p(n.data.clients.data,e=>(o(),d("tr",{key:e.id},[t("td",Ee,"#"+a(e.id),1),t("td",He,a(e.first_name)+" "+a(e.last_name),1),t("td",Ye,[t("div",null,a(e.phone_number),1),t("div",Pe,a(e.email||"Pas d'email"),1)]),t("td",Ve,a(e.agent?e.agent.name:"Non assigné"),1),t("td",ze,a(l(e.created_at)),1),t("td",Be,[t("span",{class:y([u(e.status),"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full"])},a(b(e.status)),3)])]))),128))])])])),n.data.clients.data.length>0?(o(),d("div",Oe,[t("div",Xe," Affichage de "+a(n.data.clients.from)+" à "+a(n.data.clients.to)+" sur "+a(n.data.clients.total)+" résultats ",1),t("div",Ge,[(o(!0),d(g,null,p(n.data.clients.links,e=>(o(),d("button",{key:e.label,disabled:!e.url,class:y(["px-3 py-1 text-xs rounded border border-gray-300 hover:bg-gray-50",{"bg-primary text-white hover:bg-primary-dark":e.active}])},[t("span",{innerHTML:e.label},null,8,Ue)],10,Qe))),128))])])):w("",!0)])]))}},Je={class:"bg-white rounded-lg shadow-sm overflow-hidden mb-4"},We={class:"flex border-b"},Ze=["onClick"],ts={class:"bg-white rounded-lg shadow-sm p-4 mb-4"},es={class:"mb-4"},ss={class:"flex flex-wrap gap-2"},as={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},rs={key:0,class:"flex justify-center items-center py-8"},ns={key:1},ds={key:0},os={key:1},is={key:2},ls={key:3},cs={key:2,class:"bg-white rounded-lg shadow-sm p-6 text-center"},xs={__name:"ReportsView",setup(n){const{showToast:l}=R(),b=[{id:"loans",label:"Prêts"},{id:"repayments",label:"Remboursements"},{id:"savings",label:"Épargne"},{id:"clients",label:"Clients"}],u=_("loans"),x=_(!1),r=_(null),e=_({start_date:"",end_date:"",status:"",agent_id:""}),s=_(null);j(u,()=>{(e.value.start_date||e.value.end_date)&&v()});async function v(){x.value=!0;try{let m;switch(u.value){case"loans":m=await D.getLoanReport(e.value);break;case"repayments":m=await D.getRepaymentReport(e.value);break;case"savings":m=await D.getSavingsReport(e.value);break;case"clients":m=await D.getClientReport(e.value);break}r.value=m.data.data}catch(m){console.error("Erreur lors du chargement du rapport:",m),l("Erreur lors du chargement du rapport","error")}finally{x.value=!1}}function C(){s.value=null,e.value={start_date:"",end_date:"",status:"",agent_id:""},r.value=null}function $(m){s.value=m;const i=new Date;let c,h;switch(m){case"today":c=f(i),h=f(i);break;case"thisMonth":c=f(new Date(i.getFullYear(),i.getMonth(),1)),h=f(i);break;case"lastMonth":c=f(new Date(i.getFullYear(),i.getMonth()-1,1)),h=f(new Date(i.getFullYear(),i.getMonth(),0));break;case"thisYear":c=f(new Date(i.getFullYear(),0,1)),h=f(i);break}e.value.start_date=c,e.value.end_date=h,v()}function A(){s.value=null,e.value.start_date="",e.value.end_date="",v()}function f(m){const i=m.getFullYear(),c=String(m.getMonth()+1).padStart(2,"0"),h=String(m.getDate()).padStart(2,"0");return`${i}-${c}-${h}`}return(m,i)=>(o(),d("div",null,[t("div",Je,[t("div",We,[(o(),d(g,null,p(b,c=>t("button",{key:c.id,class:y(["px-4 py-3 text-xs font-medium",u.value===c.id?"border-b-2 border-primary text-primary":"text-gray-500 hover:text-gray-700 hover:border-gray-300"]),onClick:h=>u.value=c.id},a(c.label),11,Ze)),64))])]),t("div",ts,[t("div",es,[i[6]||(i[6]=t("label",{class:"block text-xs font-medium text-gray-500 mb-2"},"Filtrage rapide",-1)),t("div",ss,[t("button",{onClick:i[0]||(i[0]=c=>$("today")),class:y([s.value==="today"?"bg-primary text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700","px-3 py-1.5 rounded-md text-xs font-medium transition-colors"])}," Aujourd'hui ",2),t("button",{onClick:i[1]||(i[1]=c=>$("thisMonth")),class:y([s.value==="thisMonth"?"bg-primary text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700","px-3 py-1.5 rounded-md text-xs font-medium transition-colors"])}," Ce mois ",2),t("button",{onClick:i[2]||(i[2]=c=>$("lastMonth")),class:y([s.value==="lastMonth"?"bg-primary text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700","px-3 py-1.5 rounded-md text-xs font-medium transition-colors"])}," Mois dernier ",2),t("button",{onClick:i[3]||(i[3]=c=>$("thisYear")),class:y([s.value==="thisYear"?"bg-primary text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700","px-3 py-1.5 rounded-md text-xs font-medium transition-colors"])}," Cette année ",2),s.value?(o(),d("button",{key:0,onClick:A,class:"bg-red-100 hover:bg-red-200 text-red-700 px-3 py-1.5 rounded-md text-xs font-medium transition-colors"}," Effacer le filtre ")):w("",!0)])]),t("div",as,[t("div",null,[i[7]||(i[7]=t("label",{class:"block text-xs font-medium text-gray-500 mb-1"},"Date de début",-1)),M(t("input",{type:"date","onUpdate:modelValue":i[4]||(i[4]=c=>e.value.start_date=c),class:"block w-full pl-10 text-xs focus:ring-primary focus:border-primary focus:outline-none rounded-md h-[34px] px-3 border border-gray-300"},null,512),[[F,e.value.start_date]])]),t("div",null,[i[8]||(i[8]=t("label",{class:"block text-xs font-medium text-gray-500 mb-1"},"Date de fin",-1)),M(t("input",{type:"date","onUpdate:modelValue":i[5]||(i[5]=c=>e.value.end_date=c),class:"block w-full pl-10 text-xs focus:ring-primary focus:border-primary focus:outline-none rounded-md h-[34px] px-3 border border-gray-300"},null,512),[[F,e.value.end_date]])]),t("div",{class:"flex items-end"},[t("button",{onClick:v,class:"bg-primary text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-primary-dark"}," Générer le rapport "),t("button",{onClick:C,class:"ml-2 bg-gray-200 text-gray-700 px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-300"}," Réinitialiser ")])])]),x.value?(o(),d("div",rs,i[9]||(i[9]=[t("div",{class:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-primary"},null,-1)]))):r.value?(o(),d("div",ns,[u.value==="loans"?(o(),d("div",ds,[k(at,{data:r.value},null,8,["data"])])):u.value==="repayments"?(o(),d("div",os,[k(It,{data:r.value},null,8,["data"])])):u.value==="savings"?(o(),d("div",is,[k(pe,{data:r.value},null,8,["data"])])):u.value==="clients"?(o(),d("div",ls,[k(Ke,{data:r.value},null,8,["data"])])):w("",!0)])):(o(),d("div",cs,i[10]||(i[10]=[t("p",{class:"text-gray-500"},'Sélectionnez des filtres et cliquez sur "Générer le rapport" pour afficher les données.',-1)])))]))}};export{xs as default};
